{"version":3,"sources":["app.js","services.js","config.js","directives.js","filters.js","controllers.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"nQueue.js","sourcesContent":["/*\r\n    Main File AngularJS\r\n */\r\n(function(){\r\n    'use strict';\r\n    angular.\r\n            module('nQueue', [\r\n            'ui.router',\r\n            'oc.lazyLoad',\r\n            'satellizer',\r\n            'ui.bootstrap',\r\n            'btford.socket-io',\r\n            'angularMoment'\r\n        ]);\r\n})();","/**\r\n * Services\r\n */\r\n\r\nangular\r\n    .module('nQueue')\r\n    .factory('socket', socket)\r\n    .factory('Login', Login)\r\n    .factory('QueueModel', QueueModel)\r\n    .factory('QueueApi', QueueApi)\r\n    .factory('UsersApi', UsersApi)\r\n    .factory('Setting', Setting)\r\n    .factory('timeServer', timeServer)\r\n    .factory('SessionService', SessionService);\r\n\r\n    /**\r\n     * Socket\r\n     * @param socketFactory\r\n     * @returns {*}\r\n     */\r\n    function socket(socketFactory, SOCKET){\r\n        var mySocket = socketFactory({\r\n            ioSocket: io.connect('//'+SOCKET+':3000')\r\n        });\r\n        return mySocket;\r\n    }\r\n\r\n    function Login($http){\r\n        return {\r\n            auth: function(login){\r\n                return $http({\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    url: '/api/authenticate',\r\n                    method: 'POST',\r\n                    data: {\r\n                        username: login.username,\r\n                        password: login.password\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Listar para Totem\r\n     * @param $http\r\n     * @returns {{get: get}}\r\n     */\r\n    function QueueModel($http){\r\n        return {\r\n            listToQueue: function(){\r\n                return $http.get('/list-to-queue');\r\n            },\r\n            addInQueue: function($queue){\r\n                return $http.post('/add-in-queue', {queue: $queue});\r\n            }\r\n        };\r\n    }\r\n\r\n    function QueueApi($http) {\r\n        return {\r\n            inQueue: function () {\r\n                return $http.get('/api/queue');\r\n            },\r\n            call: function ($data) {\r\n                return $http.post('/api/queue/call', $data);\r\n            },\r\n            again: function ($data) {\r\n                return $http.post('/api/queue/again', $data);\r\n            },\r\n            status: function ($id, $status) {\r\n                return $http.put('/api/queue/status/' + $id, $status);\r\n            }\r\n        }\r\n    }\r\n\r\n    function UsersApi($http){\r\n        return {\r\n            paginate: function($last){\r\n                return $http({\r\n                    url: '/api/users/paginate',\r\n                    method: \"GET\",\r\n                    params: { page: $last }\r\n                })\r\n            },\r\n            store: function(data){\r\n                return $http.post('/api/users/create', data);\r\n            },\r\n            edit: function(id){\r\n                return $http.get('/api/users/' + id + '/edit');\r\n            }\r\n        }\r\n    }\r\n\r\n    function Setting($http){\r\n        var base = '/api/setting/';\r\n        return {\r\n            get: function($url){\r\n                return $http.get(base + $url);\r\n            },\r\n            find: function(url, data){\r\n                return $http.get(base + url + '/' + data);\r\n            },\r\n            save: function(url, data){\r\n                return $http.post(base + url, data);\r\n            },\r\n            update: function(url, data){\r\n                return $http.put(base + url, data);\r\n            },\r\n            destroy: function(url){\r\n                return $http.delete(base + url);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    function timeServer($http){\r\n        return {\r\n            get: function(){\r\n                return $http.get('/time-in-server');\r\n            }\r\n        }\r\n    }\r\n\r\n    function SessionService(){\r\n        return {\r\n            get: function(key){\r\n                return sessionStorage.getItem(key);\r\n            },\r\n            set: function(key, value){\r\n                return sessionStorage.setItem(key, value);\r\n            },\r\n            unset: function(key){\r\n                return sessionStorage.removeItem(key);\r\n            }\r\n        }\r\n    }","/**\n * Configs and Routers\n * @param $stateProvider\n * @param $urlRouterProvider\n * @param $ocLazyLoadProvider\n */\nfunction config($ocLazyLoadProvider, $stateProvider, $urlRouterProvider, $authProvider, $httpProvider, $provide){\n\n    function redirectWhenLoggedOut($q, $injector) {\n\n        return {\n\n            responseError: function(rejection) {\n\n                // Need to use $injector.get to bring in $state or else we get\n                // a circular dependency error\n                var $state = $injector.get('$state');\n\n                // Instead of checking for a status code of 400 which might be used\n                // for other reasons in Laravel, we check for the specific rejection\n                // reasons to tell us if we need to redirect to the login state\n                var rejectionReasons = ['token_not_provided', 'token_expired', 'token_absent', 'token_invalid'];\n\n                // Loop through each rejection reason and redirect to the login\n                // state if one is encountered\n                angular.forEach(rejectionReasons, function(value, key) {\n\n                    if(rejection.data.error === value) {\n\n                        // If we get a rejection corresponding to one of the reasons\n                        // in our array, we know we need to authenticate the user so\n                        // we can remove the current user from local storage\n                        localStorage.removeItem('user');\n\n                        // Send the user to the auth state so they can login\n                        $state.go('auth');\n                    }\n                });\n\n                return $q.reject(rejection);\n            }\n        }\n    }\n\n    // Setup for the $httpInterceptor\n    $provide.factory('redirectWhenLoggedOut', redirectWhenLoggedOut);\n\n    // Push the new factory onto the $http interceptor array\n    $httpProvider.interceptors.push('redirectWhenLoggedOut');\n\n    $authProvider.loginUrl = '/api/authenticate';\n\n    $urlRouterProvider.otherwise(\"/\");\n\n    $ocLazyLoadProvider.config({\n        debug: true\n    });\n\n    $stateProvider\n        // Solicitar a Senha\n        .state('home', {\n            url: '/',\n            templateUrl: 'partials/home/index.html',\n            data: {\n                specialClass: 'nqueueBg',\n                pageTitle: 'Retire sua senha - Cartório Ayache'\n            }\n        })\n\n        .state('tv', {\n            url: '/tv',\n            templateUrl: 'partials/tv/index.html',\n            controller: \"TvCtrl as vm\",\n            data: {\n                specialClass: 'nqueueBg',\n                pageTitle: \"Tv\"\n            },\n            resolve: {\n                loadPlugin: function ($ocLazyLoad) {\n                    return $ocLazyLoad.load([\n                        {\n                            files: [\n                                'vendor/buzz/dist/buzz.min.js'\n                            ]\n                        }\n                    ]);\n                }\n            }\n        })\n\n        // Logar no Sistema\n        .state('auth', {\n            url: '/login',\n            templateUrl: 'partials/auth/login.html',\n            controller: 'AuthCtrl as vm',\n            data: { pageTitle: 'Login', specialClass: 'gray-bg'}\n        })\n        // Administrator\n\n        .state('admin', {\n            abstract: true,\n            url: '/admin',\n            templateUrl: 'partials/common/content.html',\n            data: { requireLogin: true }\n        })\n\n        .state('admin.queue', {\n            url: '/queue',\n            templateUrl: 'partials/admin/queue/index.html',\n            data: { pageTitle: 'Controle de Senhas', requireLogin: true }\n        })\n        /**\n         * Usuários Routes\n         */\n        .state('admin.users', {\n            url: '/users',\n            templateUrl: 'partials/admin/users/index.html',\n            data: { pageTitle: 'Usuários', requireLogin: true }\n        })\n\n        .state('admin.users-create', {\n            url: '/users/create',\n            templateUrl: 'partials/admin/users/create.html',\n            controller: \"UsersNewCtrl as vm\",\n            data: { pageTitle: 'Adicione um novo usuário', requireLogin: true }\n        })\n\n        .state('admin.users-edit', {\n            url: '/users/{id}/edit',\n            templateUrl: 'partials/admin/users/edit.html',\n            controller: \"UsersEditCtrl as vm\",\n            data: { pageTitle: 'Editar Usuário', requireLogin: true }\n        })\n\n        .state('admin.ticket', {\n            url: '/ticket/user-in-ticket',\n            templateUrl: '/partials/admin/ticket/index.html',\n            controller: \"UsersInTicketCtrl as vm\",\n            data: { pageTitle: 'Usuário no Guichê', requireLogin: true }\n        })\n\n        .state('admin.ticket-create', {\n            url: '/ticket/user-in-ticket/create',\n            templateUrl: '/partials/admin/ticket/create.html',\n            controller: \"UsersInTicketCreateCtrl as vm\",\n            data: { pageTitle: \"Novo Usuário no Guichê\", requireLogin: true }\n        })\n\n        .state('admin.ticket-edit', {\n            url: '/ticket/user-in-ticket/{id}/edit',\n            templateUrl: '/partials/admin/ticket/edit.html',\n            controller: \"UsersInTicketEditCtrl as vm\",\n            data: { pageTitle: 'Editar o usuário no guichê', requireLogin: true }\n        })\n}\n\n\nangular\n    .module('nQueue')\n    .config(config)\n    .run(function($rootScope, $state, $timeout, amMoment){\n\n        $rootScope.$state = $state;\n\n        $rootScope.$on('$stateChangeStart', function(event, toState) {\n\n            // Grab the user from local storage and parse it to an object\n            var user = JSON.parse(localStorage.getItem('user'));\n            var ticket = JSON.parse(localStorage.getItem('ticket'));\n\n            // If there is any user data in local storage then the user is quite\n            // likely authenticated. If their token is expired, or if they are\n            // otherwise not actually authenticated, they will be redirected to\n            // the auth state because of the rejected request anyway\n            if(user) {\n\n                // The user's authenticated state gets flipped to\n                // true so we can now show parts of the UI that rely\n                // on the user being logged in\n                $rootScope.authenticated = true;\n\n                // Putting the user's data on $rootScope allows\n                // us to access it anywhere across the app. Here\n                // we are grabbing what is in local storage\n                $rootScope.currentUser = user;\n                $rootScope.ticketUser = (ticket) ? ticket : null;\n                // If the user is logged in and we hit the auth route we don't need\n                // to stay there and can send the user to the main state\n                if(toState.name === \"auth\") {\n\n                    // Preventing the default behavior allows us to use $state.go\n                    // to change states\n                    event.preventDefault();\n                    // go to the \"main\" state which in our case is users\n                    $state.go('admin.queue');\n                }\n            }\n\n            var requireLogin = toState.data.requireLogin;\n            $timeout(function(){\n                if(requireLogin && !$rootScope.authenticated){\n                    $state.go('auth');\n                }\n            }, 0);\n\n            // Check your Access\n            var access = toState.data.access;\n            if(access && ($rootScope.currentUser.access < access)){\n                // Redirect to Dashboard\n                $state.go('admin.queue');\n                event.preventDefault();\n            }\n        });\n\n        // MomentJS locale text in Portugues.\n        amMoment.changeLocale('pt-br');\n    });\n\n","/**\r\n * Titulo da Pagina usar no public/app/config.js\r\n * @use data: { pageTitle: \"Name Page\" }\r\n * @param $rootScope\r\n * @param $timeout\r\n * @returns {{link: link}}\r\n */\r\nfunction pageTitle($rootScope, $timeout) {\r\n    return {\r\n        link: function(scope, element) {\r\n            var listener = function(event, toState, toParams, fromState, fromParams) {\r\n                // Default title - load on Dashboard 1\r\n                var title = 'nQueue | Gerenciador de Filas';\r\n                // Create your own title pattern\r\n                if (toState.data && toState.data.pageTitle) title = 'nQueue | ' + toState.data.pageTitle;\r\n                $timeout(function() {\r\n                    element.text(title);\r\n                });\r\n            };\r\n            $rootScope.$on('$stateChangeStart', listener);\r\n        }\r\n    }\r\n};\r\n\r\nfunction currentTime($timeout, dateFilter) {\r\n    // return the directive link function. (compile function not needed)\r\n    return function(scope, element, attrs) {\r\n        var format,  // date format\r\n            timeoutId; // timeoutId, so that we can cancel the time updates\r\n\r\n        // used to update the UI\r\n        function updateTime() {\r\n            element.text(dateFilter(new Date(), format));\r\n        }\r\n\r\n        // watch the expression, and update the UI on change.\r\n        scope.$watch(attrs.currentTime, function(value) {\r\n            format = value;\r\n            updateTime();\r\n        });\r\n\r\n        // schedule update in one second\r\n        function updateLater() {\r\n            // save the timeoutId for canceling\r\n            timeoutId = $timeout(function() {\r\n                updateTime(); // update DOM\r\n                updateLater(); // schedule another update\r\n            }, 1000);\r\n        }\r\n\r\n        // listen on DOM destroy (removal) event, and cancel the next UI update\r\n        // to prevent updating time ofter the DOM element was removed.\r\n        element.bind('$destroy', function() {\r\n            $timeout.cancel(timeoutId);\r\n        });\r\n\r\n        updateLater(); // kick off the UI update process.\r\n    }\r\n}\r\n/**\r\n * Horas do Auto Atendimento HH:mm:ii\r\n * @param $timeout\r\n * @returns {{restrict: string, template: string, controller: controller}}\r\n */\r\nfunction ngClock($timeout){\r\n    return {\r\n        restrict: 'E',\r\n        template:'<span class=\"time\">'\r\n        + '<span class=\"hours\">'\r\n        + '{{date.getHours() | pad}}'\r\n        + '</span>:<span class=\"minutes\">'\r\n        + '{{date.getMinutes() | pad}}'\r\n        + '</span>:<span class=\"seconds\">'\r\n        + '{{date.getSeconds() | pad}}'\r\n        + '</span>'\r\n        + '</span>',\r\n        controller: function($scope, $element) {\r\n            $scope.date = new Date();\r\n            var tick = function() {\r\n                $scope.date = new Date();\r\n                $timeout(tick, 1000);\r\n            };\r\n            $timeout(tick, 1000);\r\n        }\r\n    }\r\n}\r\n\r\nfunction ngServerTime($timeout, timeServer){\r\n    return {\r\n        restrict: 'E',\r\n        template:'<span class=\"time\">'\r\n        + '<span class=\"hours\">'\r\n        + '{{date.getHours() | pad}}'\r\n        + '</span>:<span class=\"minutes\">'\r\n        + '{{date.getMinutes() | pad}}'\r\n        + '</span>:<span class=\"seconds\">'\r\n        + '{{date.getSeconds() | pad}}'\r\n        + '</span>'\r\n        + '</span>',\r\n        controller: function($scope, $element) {\r\n            $scope.date = new Date();\r\n            var tick = function() {\r\n                $scope.date = new Date();\r\n                $timeout(tick, 1000);\r\n            };\r\n            $timeout(tick, 1000);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Mask para CPF e CNPJ\r\n * @returns {{require: string, restrict: string, link: link}}\r\n */\r\nfunction maskCpfCnpj(){\r\n    return {\r\n        require: 'ngModel',\r\n        restrict: \"A\",\r\n        link: function(scope, element, attrs){\r\n            scope.$watch(attrs.ngModel, function (v) {\r\n                var cpfcnpj = v;\r\n                if(cpfcnpj != undefined) {\r\n                    var cMask = v.replace(/\\D/g, '').length <= 11 ? '000.000.000-00' : '00.000.000/0000-00';\r\n                    element.mask(cMask);\r\n                }\r\n            })\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * Uppercase Directive\r\n * @returns {{require: string, link: link}}\r\n */\r\nfunction capitalize(){\r\n    return {\r\n        require: 'ngModel',\r\n        link: function(scope, element, attrs, modelCtrl) {\r\n            modelCtrl.$parsers.push(function(input) {\r\n                return input ? input.toUpperCase() : \"\";\r\n            });\r\n            element.css(\"text-transform\",\"uppercase\");\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * Style to Radio and Checkbox\r\n * @param $timeout\r\n * @returns {{restrict: string, require: string, link: link}}\r\n */\r\nfunction icheck($timeout) {\r\n    return {\r\n        restrict: 'A',\r\n        require: 'ngModel',\r\n        link: function($scope, element, $attrs, ngModel) {\r\n            return $timeout(function() {\r\n                var value;\r\n                value = $attrs['value'];\r\n\r\n                $scope.$watch($attrs['ngModel'], function(newValue){\r\n                    $(element).iCheck('update');\r\n                })\r\n\r\n                return $(element).iCheck({\r\n                    checkboxClass: 'icheckbox_square-green',\r\n                    radioClass: 'iradio_square-green'\r\n\r\n                }).on('ifChanged', function(event) {\r\n                    if ($(element).attr('type') === 'checkbox' && $attrs['ngModel']) {\r\n                        $scope.$apply(function() {\r\n                            return ngModel.$setViewValue(event.target.checked);\r\n                        });\r\n                    }\r\n                    if ($(element).attr('type') === 'radio' && $attrs['ngModel']) {\r\n                        return $scope.$apply(function() {\r\n                            return ngModel.$setViewValue(value);\r\n                        });\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    };\r\n}\r\n\r\nfunction minimalizaSidebar($timeout) {\r\n    return {\r\n        restrict: 'A',\r\n        template: '<a class=\"navbar-minimalize minimalize-styl-2 btn btn-primary \" href=\"\" ng-click=\"minimalize()\"><i class=\"fa fa-bars\"></i></a>',\r\n        controller: function ($scope, $element) {\r\n            $scope.minimalize = function () {\r\n                $(\"body\").toggleClass(\"mini-navbar\");\r\n                if (!$('body').hasClass('mini-navbar') || $('body').hasClass('body-small')) {\r\n                    // Hide menu in order to smoothly turn on when maximize menu\r\n                    $('#side-menu').hide();\r\n                    // For smoothly turn on menu\r\n                    setTimeout(\r\n                        function () {\r\n                            $('#side-menu').fadeIn(400);\r\n                        }, 200);\r\n                } else if ($('body').hasClass('fixed-sidebar')){\r\n                    $('#side-menu').hide();\r\n                    setTimeout(\r\n                        function () {\r\n                            $('#side-menu').fadeIn(400);\r\n                        }, 100);\r\n                } else {\r\n                    // Remove all inline style from jquery fadeIn function to reset menu state\r\n                    $('#side-menu').removeAttr('style');\r\n                }\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\nfunction sideNavigation($timeout) {\r\n    return {\r\n        restrict: 'A',\r\n        link: function(scope, element) {\r\n            // Call the metsiMenu plugin and plug it to sidebar navigation\r\n            $timeout(function(){\r\n                element.metisMenu();\r\n\r\n            });\r\n        }\r\n    };\r\n}\r\n\r\nfunction fullScroll($timeout){\r\n    return {\r\n        restrict: 'A',\r\n        link: function(scope, element) {\r\n            $timeout(function(){\r\n                element.slimscroll({\r\n                    height: '100%',\r\n                    railOpacity: 0.9\r\n                });\r\n\r\n            });\r\n        }\r\n    };\r\n}\r\n\r\nfunction slimScroll($timeout){\r\n    return {\r\n        restrict: 'A',\r\n        scope: {\r\n            boxHeight: '@'\r\n        },\r\n        link: function(scope, element) {\r\n            $timeout(function(){\r\n                element.slimscroll({\r\n                    height: scope.boxHeight,\r\n                    railOpacity: 0.9\r\n                });\r\n\r\n            });\r\n        }\r\n    };\r\n}\r\n\r\nangular\r\n    .module('nQueue')\r\n    .directive('pageTitle', pageTitle)\r\n    .directive('currentTime', currentTime)\r\n    .directive('ngClock', ngClock)\r\n    .directive('ngServerTime', ngServerTime)\r\n    .directive('maskCpfCnpj', maskCpfCnpj)\r\n    .directive('capitalize', capitalize)\r\n    .directive('icheck', icheck)\r\n    .directive('minimalizaSidebar', minimalizaSidebar)\r\n    .directive('sideNavigation', sideNavigation)\r\n    .directive('fullScroll', fullScroll)\r\n    .directive('slimScroll', slimScroll);","function pad() {\n    return function(num) {\n        return (num < 10 ? '0' + num : num); // coloca o zero na frente\n    };\n}\n/**\n * Mask to CPF/CNPJ in {{ documento | CPF }}\n * @returns {Function}\n */\nfunction cpfcnpj(){\n    return function(input) {\n        if(input != undefined)\n        {\n            if(input.length <= 11){\n                var str = input+ '';\n                str = str.replace(/\\D/g,'');\n                str = str.replace(/(\\d{3})(\\d)/,\"$1.$2\");\n                str = str.replace(/(\\d{3})(\\d)/,\"$1.$2\");\n                str = str.replace(/(\\d{3})(\\d{1,2})$/,\"$1-$2\");\n                return str;\n            }else{\n                var str = input+ '';\n                str = str.replace(/\\D/g,'');\n                str = str.replace(/(\\d{2})(\\d)/,\"$1.$2\");\n                str = str.replace(/(\\d{3})(\\d)/,\"$1.$2\");\n                str = str.replace(/(\\d{3})(\\d)/,\"$1/$2\");\n                str = str.replace(/(\\d{4})(\\d{1,2})$/,\"$1-$2\");\n                return str;\n            }\n        }\n    };\n}\n\nfunction attend(){\n    return function(input){\n        if(input != undefined){\n            if(input==1){\n                return \"Normal\";\n            }else if(input==3){\n                return \"Preferencial\";\n            }else if(input==2){\n                return \"Mensalista\"\n            }\n        }\n    }\n}\n\nangular\n    .module('nQueue')\n    .filter('pad', pad)\n    .filter('cpfcnpj', cpfcnpj)\n    .filter('attend', attend);","/**\r\n * Controllers AngularJS\r\n */\r\nfunction MainCtrl($scope){\r\n\r\n}\r\n\r\n/**\r\n * Authenticate Controller\r\n * @param $auth\r\n * @param $state\r\n * @param $http\r\n * @param $rootScope\r\n * @constructor\r\n */\r\nfunction AuthCtrl($auth, $state, $http, $scope, $rootScope){\r\n\r\n    var vm = this;\r\n\r\n    $scope.loginError   = false;\r\n    $scope.loginErrorText = \"\";\r\n\r\n    vm.login = function(login){\r\n        var credentials = {\r\n            username: login.username,\r\n            password: login.password\r\n        };\r\n        $auth.login(credentials).then(function(){\r\n                return $http.get('/api/authenticate/user')\r\n            }, function(response){\r\n            $scope.loginError = true;\r\n                if(response.status===422){\r\n                    $scope.isErrorType = 1;\r\n                    $scope.loginErrorText = response.data.username[0];\r\n                }else if(response.status == 401 && (response.data.error = \"invalid_credentials\")){\r\n                    $scope.isErrorType = 2;\r\n                    $scope.loginErrorText = \"Sua senha está incorreta\";\r\n                }\r\n\r\n            })\r\n            .then(function(response){\r\n                // Stringify the returned data to prepare it\r\n                // to go into local storage\r\n                var user = JSON.stringify(response.data.user);\r\n                // Set the stringified user data into local storage\r\n                localStorage.setItem('user', user);\r\n                // The user's authenticated state gets flipped to\r\n                // true so we can now show parts of the UI that rely\r\n                // on the user being logged in\r\n                $rootScope.authenticated = true;\r\n                // Putting the user's data on $rootScope allows\r\n                // us to access it anywhere across the app\r\n                $rootScope.currentUser = response.data.user;\r\n\r\n                $http.post('/api/authenticate/use-ticket', {id: $rootScope.currentUser.id})\r\n                    .then(function(response){\r\n\r\n                        var ticket = JSON.stringify(response.data);\r\n\r\n                        localStorage.setItem('ticket', ticket);\r\n\r\n                        $rootScope.ticketUser = response.data;\r\n                        // Everything worked out so we can now redirect to\r\n                        // the users state to view the data\r\n                        $state.go('admin.queue');\r\n                    });\r\n            })\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * Profile User\r\n * @param $http\r\n * @param $auth\r\n * @param $rootScope\r\n * @constructor\r\n */\r\nfunction ProfileCtrl($http, $auth, $rootScope, $state){\r\n\r\n    var vm = this;\r\n\r\n    vm.logout = function() {\r\n        $auth.logout().then(function() {\r\n            // Remove the authenticated user from local storage\r\n            localStorage.removeItem('user');\r\n            localStorage.removeItem('ticket');\r\n            // Flip authenticated to false so that we no longer\r\n            // show UI elements dependant on the user being logged in\r\n            $rootScope.authenticated = false;\r\n            // Remove the current user info from rootscope\r\n            $rootScope.currentUser = null;\r\n            $rootScope.ticketUser = null;\r\n            $state.go('auth', {})\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * Home Controller\r\n * @param $scope\r\n * @param QueueModel\r\n * @param socket\r\n * @constructor\r\n */\r\nfunction HomeCtrl($scope, QueueModel, socket){\r\n    /**\r\n     * VM / SELF\r\n     */\r\n    var vm      = this,\r\n        self    = $scope;\r\n    /**\r\n     * Desabilitar botão\r\n     * @type {boolean}\r\n     * @private\r\n     */\r\n    self._waitPrinter = false;\r\n    /**\r\n     * Lista de Atendimentos\r\n     * @type {Array}\r\n     */\r\n    $scope.list = [];\r\n    /**\r\n     * Carregar Atendimentos pelo Factory\r\n     */\r\n    QueueModel\r\n        .listToQueue()\r\n        .success(function(data){\r\n            $scope.list = data;\r\n        });\r\n    /**\r\n     * Requisitar uma Senha.\r\n     * @param $queue\r\n     */\r\n    vm.getQueue = function($queue){\r\n        self._waitPrinter = true;\r\n        QueueModel.\r\n            addInQueue($queue)\r\n            .success(function(data){\r\n                socket.emit(\"add:Queue\", data);\r\n                self._waitPrinter = false;\r\n        });\r\n    };\r\n    /**\r\n     * Get Date Totem\r\n     * @returns {string}\r\n     */\r\n    vm.dateDay = function(){\r\n        var today = new Date();\r\n        var dd = today.getDate();\r\n        var mm = today.getMonth()+1; //January is 0!\r\n\r\n        var yyyy = today.getFullYear();\r\n        if(dd<10){\r\n            dd='0'+dd\r\n        }\r\n        if(mm<10){\r\n            mm='0'+mm\r\n        }\r\n        var today = dd+'/'+mm+'/'+yyyy;\r\n        return today;\r\n    };\r\n    /**\r\n     * Reload Page\r\n     */\r\n    vm.refresh = function(){\r\n        location.reload();\r\n    };\r\n}\r\n\r\n\r\n\r\nfunction TvCtrl($scope, socket){\r\n    var vm = this,\r\n        self = $scope;\r\n\r\n    $scope.inQueue = [];\r\n    $scope._newCall;\r\n    $scope._oldCall = [];\r\n\r\n\r\n    socket.on('tv:Calling', function(data){\r\n        vm.received(data);\r\n    });\r\n\r\n    vm.received = function(e){\r\n        var received = e;\r\n        $scope.$apply(function(){\r\n            $scope._newCall = received;\r\n            console.log($scope._newCall);\r\n            /**\r\n             * PASSAR OS PARAMETROS AQUI PARA FAZER O TOQUE DO AUDIO\r\n             */\r\n            PainelWeb.Alert.play();\r\n        })\r\n    };\r\n\r\n\r\n    $scope.$watch('_newCall', function(newValue, oldValue){\r\n        if(oldValue){\r\n            var old = angular.copy(oldValue);\r\n            if(!vm.compareNewAndOld($scope._newCall, old)){\r\n                if(!vm.existsInArray($scope._oldCall, old.senha)){\r\n                    $scope._oldCall.unshift(old);\r\n                }\r\n            }\r\n            if($scope._oldCall.length >= 4){\r\n                $scope._oldCall.pop();\r\n            }\r\n        }\r\n    });\r\n\r\n    vm.existsInArray = function(list, object){\r\n        var x;\r\n        for(x in list){\r\n            console.log(list[x]);\r\n            if(list.hasOwnProperty(x) && list[x].senha === object){\r\n                console.log(list[x]);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    vm.compareNewAndOld = function(nV, oV){\r\n        if(nV.senha === oV.senha){\r\n            return true;\r\n        }else{\r\n            return false;\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * Queue Manager\r\n * @param $scope\r\n * @param $rootScope\r\n * @param QueueApi\r\n * @param socket\r\n * @constructor\r\n */\r\nfunction QueueCtrl($scope, $rootScope, QueueApi, socket){\r\n    var self    = $scope,\r\n        vm      = this;\r\n\r\n    /**\r\n     * Step for Change\r\n     * @type {number}\r\n     * @private\r\n     */\r\n    self._step = 1;\r\n\r\n    /**\r\n     * Fila de Atendimento\r\n     */\r\n    self._inQueue = [];\r\n\r\n    /**\r\n     * Adicionar a fila de todos\r\n     * Via socket.io\r\n     */\r\n    socket.on(\"in:Queue\", function(data){\r\n        self._inQueue.push(data);\r\n    });\r\n\r\n    /**\r\n     * Carregando Contado nos Botoes\r\n     */\r\n    self.$watchCollection('_inQueue', function(){\r\n        self._normal = 0;\r\n        self._preferencial = 0;\r\n        self._mensalista = 0;\r\n        angular.forEach(self._inQueue, function(value, key){\r\n            if(value.queue_id==1){\r\n                self._normal+=1;\r\n            }else if(value.queue_id==3){\r\n                self._preferencial+=1;\r\n            }else if(value.queue_id==2){\r\n                self._mensalista+=1;\r\n            }\r\n        })\r\n    });\r\n\r\n    /**\r\n     * Carregando os Atendimentos do Banco de Dados\r\n     * @private\r\n     */\r\n    self._loadQueue = function(){\r\n        QueueApi\r\n            .inQueue()\r\n            .success(function(data){\r\n                self._inQueue = data;\r\n            })\r\n    };\r\n\r\n    /**\r\n     * Inicializar\r\n     */\r\n    self._loadQueue();\r\n\r\n    \r\n    /**\r\n     * Area to Calling Queue in TV\r\n     */\r\n    self._inCallingWait = null;\r\n\r\n    // Chamar Nova Senha;\r\n    vm.callQueue = function(atendimento){\r\n\r\n        self._step = 2;\r\n        \r\n        // Pegando Usuário Logado\r\n        var _user = $rootScope.currentUser.id;\r\n\r\n        // Localizando Proximo na Fila\r\n        var _update = vm.findAttend(self._inQueue, atendimento);\r\n\r\n        // Pegando Index\r\n        var _index = self._inQueue.indexOf(_update);\r\n        \r\n        // Enviar Para TV\r\n        QueueApi\r\n            .call({ id: _update.id, user_id: _user })\r\n            .success(function(data){\r\n                self._inCallingWait = data.id;\r\n                socket.emit(\"call:Queue\", data);\r\n                socket.emit(\"remove:Queue\", data);\r\n                //ws.send(JSON.stringify(data));\r\n                //self._inQueue.splice(_index, 1);\r\n            });\r\n    };\r\n\r\n    socket.on(\"destroy:Queue\", function(data){\r\n        var inQueue = vm.findId(self._inQueue, data.id);\r\n        var _index = self._inQueue.indexOf(inQueue);\r\n        self._inQueue.splice(_index, 1);\r\n    });\r\n\r\n\r\n    /**\r\n     * Status do Atendimento\r\n     */\r\n    self._saveCalling = null;\r\n\r\n    self.showButtonsCancel = false;\r\n    /**\r\n     * Chamar Novamente\r\n     * @param id\r\n     */\r\n    vm.novamente = function(id){\r\n        QueueApi\r\n            .again({id: id})\r\n            .success(function(data){\r\n                //ws.send(JSON.stringify(data));\r\n                socket.emit(\"call:Queue\", data);\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Em Atendimento\r\n     * @param id\r\n     */\r\n    vm.atendimento = function(id){\r\n        self._step = 3;\r\n        QueueApi\r\n            .status(id, {status_id: 3})\r\n            .success(function(data){\r\n                console.log(\"Atendimento: \");\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Atendimento Finalizado\r\n     * @param id\r\n     */\r\n    vm.finalizado = function(id){\r\n        self._step = 1;\r\n        QueueApi\r\n            .status(id, {status_id: 4})\r\n            .success(function(data){\r\n                console.log(\"Finalizado: \");\r\n            });\r\n    }\r\n    /**\r\n     * Desistiu do Atendimento\r\n     * @param id\r\n     */\r\n    vm.desistiu = function(id){\r\n        self._step = 1;\r\n        QueueApi\r\n            .status(id, {status_id: 5})\r\n            .success(function(data){\r\n                console.log(\"Desistiu: \");\r\n            });\r\n\r\n    };\r\n    /**\r\n     * Nao Compareceu ao Guichê\r\n     */\r\n    vm.naocompareceu = function(id){\r\n        self._step = 1;\r\n        QueueApi\r\n            .status(id, {status_id: 6})\r\n            .success(function(data){\r\n                console.log(\"Não Compareceu: \");\r\n            });\r\n\r\n    }\r\n\r\n    /**\r\n     * Removendo da Fila da Atendimento\r\n     * @param _inQueue\r\n     * @param atendimento\r\n     * @returns {*}\r\n     */\r\n    vm.findAttend = function(_inQueue, atendimento){\r\n        for(var i=0; i < _inQueue.length; i++){\r\n            if(_inQueue[i].queue_id == atendimento){\r\n                return _inQueue[i]\r\n            }\r\n        }\r\n    };\r\n\r\n    vm.findId = function(_inQueue, _id){\r\n        for(var i=0;i<_inQueue.length; i++){\r\n            if(_inQueue[i].id == _id){\r\n                return _inQueue[i];\r\n            }\r\n        }\r\n    };\r\n\r\n    vm.removeQueue = function(_id){\r\n        console.log(_id);\r\n        QueueApi\r\n            .status(_id, {status_id: 5})\r\n            .success(function(response){\r\n                var data = { id: _id };\r\n                socket.emit(\"remove:Queue\", data);\r\n\r\n            });\r\n    };\r\n\r\n}\r\n\r\n\r\nfunction UsersCtrl($scope, $rootScope, UsersApi){\r\n    var vm = this,\r\n        self = $scope;\r\n    \r\n    self.users = [];\r\n\r\n    self.lastpage = 1;\r\n    /**\r\n     * Function Init Users\r\n     */\r\n    vm.initUsers = function ()\r\n    {\r\n        UsersApi\r\n            .paginate(self.lastpage)\r\n            .success(function(response){\r\n                self.nextPage = (response.next_page_url) ? true : false;\r\n                self.users = response.data;\r\n                self.currentPage = response.current_page;\r\n            });\r\n    };\r\n    /**\r\n     * Start Init Users\r\n     */\r\n    vm.initUsers();\r\n\r\n    vm.loadMore = function()\r\n    {\r\n        self.lastpage +=1;\r\n        UsersApi\r\n            .paginate(self.lastpage)\r\n            .success(function(response){\r\n                self.nextPage = (response.next_page_url) ? true : false;\r\n                self.users = self.users.concat(response.data);\r\n            })\r\n    }\r\n}\r\n\r\nfunction UsersNewCtrl($scope, $state, UsersApi, Setting){\r\n\r\n    var vm = this,\r\n        self = $scope;\r\n\r\n    self.items = [];\r\n\r\n    self.form = {};\r\n\r\n    self.initAccess = function(){\r\n        Setting\r\n            .get('access')\r\n            .success(function(response){\r\n                self.items = response;\r\n                self.form.access = self.items[0].id;\r\n            })\r\n    };\r\n    /**\r\n     * loadAccess\r\n     */\r\n    self.initAccess();\r\n\r\n    /**\r\n     * Criar Usuário\r\n     * @param form\r\n     */\r\n    vm.create = function(form){\r\n        UsersApi\r\n            .store(form)\r\n            .success(function(data){\r\n                if(data)\r\n                    $state.go('admin.users')\r\n            });\r\n    }\r\n\r\n}\r\n\r\nfunction UsersEditCtrl($scope, $rootScope, $stateParams, UsersApi){\r\n    var vm = this,\r\n        self = $scope;\r\n\r\n    self._id = $stateParams.id;\r\n\r\n    self.form = {};\r\n\r\n    UsersApi\r\n        .edit(self._id)\r\n        .success(function(response){\r\n            self.form = response;\r\n        });\r\n\r\n\r\n    vm.edit = function(form){\r\n        console.log(form);\r\n    };\r\n\r\n    vm.changePassword = function(password){\r\n        console.log(password);\r\n    };\r\n\r\n    vm.verifyPassword = function (form) {\r\n        if((form.password == null) || (form.password != form.cpassword)){\r\n            return true\r\n        }else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n\r\nfunction UsersInTicketCtrl($scope, socket, Setting){\r\n    var vm = this,\r\n        self = $scope;\r\n\r\n    self._usersInTicket = [];\r\n\r\n    self._init = function(){\r\n        Setting\r\n            .get('ticket/users-in-tickets')\r\n            .success(function(response){\r\n                self._usersInTicket = response;\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Init Page\r\n     */\r\n    self._init();\r\n\r\n\r\n    socket.on(\"usersIn:into\", function(data){\r\n        self._usersInTicket.push(data);\r\n    });\r\n\r\n\r\n    /**\r\n     * Deletar Usuário do Guichê\r\n     * @param _id\r\n     * @param _index\r\n     */\r\n    vm.deleteUserInTicket = function(_id, _index){\r\n        Setting\r\n            .destroy('ticket/users-in-tickets-delete/' + _id)\r\n            .success(function(response){\r\n                self._usersInTicket.splice(_index, 1);\r\n            })\r\n    }\r\n}\r\n\r\nfunction UsersInTicketCreateCtrl($scope, Setting, socket){\r\n    var vm = this,\r\n        self = $scope;\r\n\r\n    self.users = [];\r\n    self.tickets = [];\r\n\r\n    self._init = function(){\r\n        Setting.get('ticket/users').success(function(response){self.users = response});\r\n        Setting.get('ticket/tickets').success(function(response){self.tickets=response});\r\n    };\r\n    self._init();\r\n\r\n    vm.register = function(form){\r\n        Setting\r\n            .save('ticket/user-in-tickets', form)\r\n            .success(function(response){\r\n                socket.emit(\"usersIn:add\", response);\r\n            });\r\n    }\r\n\r\n}\r\n\r\nfunction UsersInTicketEditCtrl($scope, Setting, $stateParams){\r\n    var vm = this,\r\n        self = $scope;\r\n\r\n    var _id = $stateParams.id;\r\n\r\n    self.users = [];\r\n    self.tickets = [];\r\n\r\n    self._init = function(){\r\n        Setting.get('ticket/users').success(function(response){self.users = response});\r\n        Setting.get('ticket/tickets').success(function(response){self.tickets=response});\r\n    };\r\n    \r\n    self._init();\r\n\r\n    Setting\r\n        .find('ticket/search', _id)\r\n        .success(function(response){\r\n            console.log(response);\r\n        });\r\n\r\n}\r\n\r\n\r\n/**\r\n * Play Audios\r\n */\r\nvar PainelWeb = {\r\n  Alert: {\r\n        play: function(){\r\n            var filename = new buzz.sound(\"/assets/media/alert/airport.mp3\");\r\n            filename.play();\r\n        }\r\n    }\r\n};\r\n\r\n\r\nangular\r\n    .module('nQueue')\r\n    .controller('MainCtrl', MainCtrl)\r\n    .controller('AuthCtrl', AuthCtrl)\r\n    .controller('ProfileCtrl', ProfileCtrl)\r\n    .controller('HomeCtrl', HomeCtrl)\r\n    .controller('TvCtrl', TvCtrl)\r\n    .controller('QueueCtrl', QueueCtrl)\r\n    .controller('UsersCtrl', UsersCtrl)\r\n    .controller('UsersNewCtrl', UsersNewCtrl)\r\n    .controller('UsersEditCtrl', UsersEditCtrl)\r\n    .controller('UsersInTicketCtrl', UsersInTicketCtrl)\r\n    .controller('UsersInTicketCreateCtrl', UsersInTicketCreateCtrl)\r\n    .controller('UsersInTicketEditCtrl', UsersInTicketEditCtrl);"],"sourceRoot":"/source/"}